<!DOCTYPE html>
<html>
  <head>
    <title>Exemplo de página web com vídeo e QR Code</title>
    <style>
      body {
        margin: 0;
        padding: 0;
      }

      .div {
        width: 100vw;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: flex-start;
      }
      .video-container {
        padding: 75% 0 0 0;
        position: relative;
      }

      canvas {
        position: absolute;
        top: 0;
        left: 0;
      }
    </style>
  </head>
  <body>
    <div class="div">
      <div class="video-container">
        <video id="video" width="560" height="315" src="https://www.youtube.com/embed/6ISYNFHejPw?controls=0&amp;start=8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></video>
        <button onclick="openFullscreen()">Tela cheia</button>
        <canvas id="canvas"></canvas>
      </div>
    </div>

    <script src="https://rawgit.com/cozmo/jsQR/master/dist/jsQR.js"></script>
    <script>
      const video = document.getElementById('video');
      const canvas = document.getElementById('canvas');
      const context = canvas.getContext('2d');
      let requestId;

      function openFullscreen() {
        var elem = document.querySelector('video');
        if (elem.requestFullscreen) {
          elem.requestFullscreen();
        } else if (elem.webkitRequestFullscreen) { /* Safari */
          elem.webkitRequestFullscreen();
        } else if (elem.msRequestFullscreen) { /* IE11 */
          elem.msRequestFullscreen();
        }
      }

      function startCapture() {
        navigator.mediaDevices.getUserMedia({ video: true })
          .then(stream => {
            video.srcObject = stream;
            video.play();
            tick();
          })
          .catch(error => console.error(error));
      }

      function tick() {
        context.drawImage(video, 0, 0, canvas.width, canvas.height);
        const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
        const code = jsQR(imageData.data, imageData.width, imageData.height, {
          inversionAttempts: 'dontInvert',
        });

        if (code) {
          if (code.data === 'https://www.youtube.com/embed/6ISYNFHejPw?controls=0&start=8') {
            video.play();
          } else {
            video.pause();
          }
        }

        requestId = requestAnimationFrame(tick);
      }

      startCapture();
    </script>
  </body>
</html>
